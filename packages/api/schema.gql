# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type NodeSettingsFieldDto {
  id: ID!
  key: String!
  value: String!
}

type NodeMeasurementUnitDto {
  key: String!
  name: String!
  unit: String!
}

type NodeMeasurementDto {
  key: String!
  name: String!
  unit_options: [NodeMeasurementUnitDto!]!
}

type NodeChannelMeasurementDto {
  node_id: ID!
  channel: String!
  measurement: String!
  time: DateTime!
  value: String!
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type NodeStatusDto {
  node_id: ID!
  connected: Boolean!
  active: Boolean!
  channels: [Int!]!
}

type MeasurementConversionEntity {
  id: ID!
  convert_unit_from: String!
  convert_unit_to: String!
  equation: String!
}

type NodeChannelEntity {
  id: ID!
  name: String!
  is_enabled: Boolean!
  default_measurement_unit: String!
  channel: Int!
  icon: String
  settings: [NodeSettingsFieldDto!]!
  node: NodeEntity!
  node_id: ID!
  conversion: MeasurementConversionEntity
  measurement: NodeMeasurementDto!
}

type NodeEntity {
  id: ID!
  public_key: ID!
  type: NodeTypeEnum!
  name: String!
  nickname: String!
  icon: String!
  is_enabled: Boolean!
  settings: [NodeSettingsFieldDto!]!
  channels: [NodeChannelEntity!]!
}

enum NodeTypeEnum {
  INPUT
  OUTPUT
}

type ConditionalActionEntity {
  id: ID!
  target_id: ID!
  target_type: ControllerTypeEnum!
  target_type_channel: Int
  target_action_state: ConditionalTargetActiveStateEnum!
  target_settings: [NodeSettingsFieldDto!]!
}

enum ControllerTypeEnum {
  INPUT
  OUTPUT
  CONDITIONAL
}

enum ConditionalTargetActiveStateEnum {
  ACTIVATE
  DEACTIVATE
}

type ConditionalEntity {
  id: ID!
  is_enabled: Boolean!
  is_activated: Boolean!
  initiator_id: ID
  initiator_type: ConditionalInitiatorTypeEnum!
  initiator_type_channel: Int
  initiator_value: String!
  initiator_value_type: ConditionalInitiatorValueTypeEnum!
  initiator_condition: ConditionalInitiatorConditionEnum!
  actions: [ConditionalActionEntity!]!
}

enum ConditionalInitiatorTypeEnum {
  INPUT
  OUTPUT
  CONDITIONAL
  TIME
}

enum ConditionalInitiatorValueTypeEnum {
  BOOLEAN
  INTEGER
  STRING
  STRING_ARRAY
}

enum ConditionalInitiatorConditionEnum {
  EQUAL
  LESS_THAN
  MORE_THAN
  INCLUDES
}

type DashboardCardEntity {
  id: ID!
  order: Int!
  controller_id: ID!
  controller_type: ControllerTypeEnum!
}

type ApCredentialsDto {
  ip: String!
  ssid: String!
  password: String!
}

type Query {
  pingNetwork: Boolean!
  getHubNetworkType: String!
  getNodeApCredentials: ApCredentialsDto!
  getHubFiSSID: String!
  getAllNodesStatus: [NodeStatusDto!]!
  findAllNodes: [NodeEntity!]!
  findNodeChannelsByNodeId(node_id: ID!): [NodeChannelEntity!]!
  findLastMeasurementAvailable(node_id: ID!): [NodeChannelMeasurementDto!]!
  findLastMeasurementByDuration(input: LastMeasurementByDurationInput!): [NodeChannelMeasurementDto!]!
  findAllDashboardCards: [DashboardCardEntity!]!
}

input LastMeasurementByDurationInput {
  node_id: ID!
  past_seconds: Int!
}

type Mutation {
  setupHubInstance(token: String!): Boolean!
  setNodeApCredentials: ApCredentialsDto!
  setHubNetworkType(type: String!): Boolean!
  setHubFiCredentials(input: HubfiCredentialsInput!): ApCredentialsDto!
  createNode(input: CreateNodeInput!): NodeEntity!
  updateNodeStatus(id: ID!, input: UpdateNodeStatusInput!): NodeEntity!
  updateNodeNickname(id: ID!, input: UpdateNodeNicknameInput!): NodeEntity!
  updateNodeSettings(id: ID!, input: [UpdateNodeSettingInput!]!, channel_id: ID): NodeEntity!
  updateChannelMeasurementUnit(input: UpdateChannelMeasurementUnitInput!): NodeChannelEntity!
  updateOutputChannelName(channel_id: ID!, input: UpdateChannelNameInput!): NodeChannelEntity!
  updateOutputChannelIcon(channel_id: ID!, input: UpdateChannelIconInput!): NodeChannelEntity!
  nodeInputUpdateActiveStatus(node_id: ID!, status: NodeInputActiveStatusEnum!): InputControllerResponseEnum!
  nodeOutputUpdateState(node_id: ID!, input: OutputUpdateStateInput!): OutputControllerResponseEnum!
  addDashboardCard(input: AddDashboardCardInput!): DashboardCardEntity!
  removeDashboardCard(controller_id: ID!): Boolean!
  createTimeAutomation(input: CreateTimeAutomationInput!): ConditionalEntity!
}

input HubfiCredentialsInput {
  ssid: String!
  password: String!
}

input CreateNodeInput {
  model_name: String!
  public_key: String!
  instance_key: ID!
  nickname: String!
  icon: String!
  type: NodeTypeEnum!
  settings: [CreateNodeSettingsFieldInput!]!
  channels: [CreateNodeChannel!]
}

input CreateNodeSettingsFieldInput {
  id: ID!
  key: String!
  value: String!
}

input CreateNodeChannel {
  name: String
  channel: Int!
  measurement_key: String!
  settings: [CreateNodeSettingsFieldInput!]!
}

input UpdateNodeStatusInput {
  is_enabled: Boolean!
}

input UpdateNodeNicknameInput {
  nickname: String!
}

input UpdateNodeSettingInput {
  id: ID!
  value: String!
}

input UpdateChannelMeasurementUnitInput {
  id: ID!
  unit: String!
}

input UpdateChannelNameInput {
  name: String!
}

input UpdateChannelIconInput {
  icon: String
}

enum InputControllerResponseEnum {
  NOT_CONNECTED
  SUCCESS
}

enum NodeInputActiveStatusEnum {
  ACTIVATE
  DEACTIVATE
}

enum OutputControllerResponseEnum {
  NOT_CONNECTED
  SUCCESS
}

input OutputUpdateStateInput {
  channel: Int!
  state: NodeOutputStateEnum!
}

enum NodeOutputStateEnum {
  ON
  OFF
}

input AddDashboardCardInput {
  controller_id: ID!
  controller_type: ControllerTypeEnum!
}

input CreateTimeAutomationInput {
  time: CreateTimeAutomationInitiatorInput!
  actions: [CreateTimeAutomationActionInput!]!
}

input CreateTimeAutomationInitiatorInput {
  type: TimeAutomationTypeEnum!
  cron: String!
}

enum TimeAutomationTypeEnum {
  SUNRISE
  SUNSET
  TIME
}

input CreateTimeAutomationActionInput {
  target_id: ID!
  target_type: ControllerTypeEnum!
  target_type_channel: Int
  target_action_state: ConditionalTargetActiveStateEnum!
}
